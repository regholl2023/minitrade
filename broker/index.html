
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-8.5.10">
    
    
      
        <title>minitrade.broker - Minitrade</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-HK9C9K1N4Q"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-HK9C9K1N4Q",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-HK9C9K1N4Q",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#minitradebroker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Minitrade" class="md-header__button md-logo" aria-label="Minitrade" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Minitrade
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              minitrade.broker
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dodid/minitrade" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../backtest/" class="md-tabs__link md-tabs__link--active">
        API Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../examples/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Minitrade" class="md-nav__button md-logo" aria-label="Minitrade" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Minitrade
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dodid/minitrade" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="..">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../backtesting/" class="md-nav__link">
        Backtesting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../strategy/" class="md-nav__link">
        Writing strategy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trading/" class="md-nav__link">
        Trading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compatibility/" class="md-nav__link">
        Compatibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../backtest/" class="md-nav__link">
        minitrade.backtest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datasource/" class="md-nav__link">
        minitrade.datasource
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          minitrade.broker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        minitrade.broker
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base" class="md-nav__link">
    base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker" class="md-nav__link">
    Broker
  </a>
  
    <nav class="md-nav" aria-label="Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.AVAILABLE_BROKERS" class="md-nav__link">
    AVAILABLE_BROKERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.cancel_order" class="md-nav__link">
    cancel_order()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.connect" class="md-nav__link">
    connect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.disconnect" class="md-nav__link">
    disconnect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.download_orders" class="md-nav__link">
    download_orders()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.download_trades" class="md-nav__link">
    download_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.find_order" class="md-nav__link">
    find_order()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.find_trades" class="md-nav__link">
    find_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.format_trades" class="md-nav__link">
    format_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_account_info" class="md-nav__link">
    get_account_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_broker" class="md-nav__link">
    get_broker()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_portfolio" class="md-nav__link">
    get_portfolio()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.is_ready" class="md-nav__link">
    is_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.resolve_tickers" class="md-nav__link">
    resolve_tickers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.submit_order" class="md-nav__link">
    submit_order()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount" class="md-nav__link">
    BrokerAccount
  </a>
  
    <nav class="md-nav" aria-label="BrokerAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.alias" class="md-nav__link">
    alias
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.broker" class="md-nav__link">
    broker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.mode" class="md-nav__link">
    mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.password" class="md-nav__link">
    password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.username" class="md-nav__link">
    username
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.get_account" class="md-nav__link">
    get_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.list" class="md-nav__link">
    list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidator" class="md-nav__link">
    OrderValidator
  </a>
  
    <nav class="md-nav" aria-label="OrderValidator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidator.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog" class="md-nav__link">
    OrderValidatorLog
  </a>
  
    <nav class="md-nav" aria-label="OrderValidatorLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.exception" class="md-nav__link">
    exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.id" class="md-nav__link">
    id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.log_time" class="md-nav__link">
    log_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.order" class="md-nav__link">
    order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.order_id" class="md-nav__link">
    order_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.result" class="md-nav__link">
    result
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trader/" class="md-nav__link">
        minitrade.trader
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../examples/">Original from Backtesting.py</a>
          
            <label for="__nav_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Original from Backtesting.py" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Original from Backtesting.py
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/Quick%20Start%20User%20Guide/" class="md-nav__link">
        Backtesting.py Quick Start User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/Strategies%20Library/" class="md-nav__link">
        Library of Composable Base Strategies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/Multiple%20Time%20Frames/" class="md-nav__link">
        Multiple Time Frames
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/Parameter%20Heatmap%20%26%20Optimization/" class="md-nav__link">
        Parameter Heatmap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/Trading%20with%20Machine%20Learning/" class="md-nav__link">
        Trading with Machine Learning Models
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base" class="md-nav__link">
    base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker" class="md-nav__link">
    Broker
  </a>
  
    <nav class="md-nav" aria-label="Broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.AVAILABLE_BROKERS" class="md-nav__link">
    AVAILABLE_BROKERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.cancel_order" class="md-nav__link">
    cancel_order()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.connect" class="md-nav__link">
    connect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.disconnect" class="md-nav__link">
    disconnect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.download_orders" class="md-nav__link">
    download_orders()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.download_trades" class="md-nav__link">
    download_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.find_order" class="md-nav__link">
    find_order()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.find_trades" class="md-nav__link">
    find_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.format_trades" class="md-nav__link">
    format_trades()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_account_info" class="md-nav__link">
    get_account_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_broker" class="md-nav__link">
    get_broker()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.get_portfolio" class="md-nav__link">
    get_portfolio()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.is_ready" class="md-nav__link">
    is_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.resolve_tickers" class="md-nav__link">
    resolve_tickers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.Broker.submit_order" class="md-nav__link">
    submit_order()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount" class="md-nav__link">
    BrokerAccount
  </a>
  
    <nav class="md-nav" aria-label="BrokerAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.alias" class="md-nav__link">
    alias
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.broker" class="md-nav__link">
    broker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.mode" class="md-nav__link">
    mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.password" class="md-nav__link">
    password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.username" class="md-nav__link">
    username
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.get_account" class="md-nav__link">
    get_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.list" class="md-nav__link">
    list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.BrokerAccount.save" class="md-nav__link">
    save()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidator" class="md-nav__link">
    OrderValidator
  </a>
  
    <nav class="md-nav" aria-label="OrderValidator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidator.validate" class="md-nav__link">
    validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog" class="md-nav__link">
    OrderValidatorLog
  </a>
  
    <nav class="md-nav" aria-label="OrderValidatorLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.exception" class="md-nav__link">
    exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.id" class="md-nav__link">
    id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.log_time" class="md-nav__link">
    log_time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.order" class="md-nav__link">
    order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.order_id" class="md-nav__link">
    order_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitrade.broker.base.OrderValidatorLog.result" class="md-nav__link">
    result
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/dodid/minitrade/edit/master/docs/broker.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="minitradebroker">minitrade.broker</h1>


<div class="doc doc-object doc-module">



<a id="minitrade.broker.base"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h3 id="minitrade.broker.base.Broker" class="doc doc-heading">
          <code>Broker</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code></p>

  
      <p>Broker is a base class that manages the connection to a broker system. Extend this class 
to add a concrete implementation to talk to a particular broker.</p>

            <details class="quote">
              <summary>Source code in <code>minitrade/broker/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="k">class</span> <span class="nc">Broker</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">    Broker is a base class that manages the connection to a broker system. Extend this class </span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    to add a concrete implementation to talk to a particular broker.</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="n">AVAILABLE_BROKERS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;IB&#39;</span><span class="p">:</span> <span class="s1">&#39;Interactive Brokers&#39;</span><span class="p">,</span> <span class="s1">&#39;Manual&#39;</span><span class="p">:</span> <span class="s1">&#39;Manual Trader&#39;</span><span class="p">}</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;A dict mapping from broker alias to broker user-friendly name for supported brokers.&#39;&#39;&#39;</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>    <span class="k">def</span> <span class="nf">get_broker</span><span class="p">(</span><span class="n">account</span><span class="p">:</span> <span class="n">BrokerAccount</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Broker</span><span class="p">:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Create a broker connector for a `account` that specifies the type of broker</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        and the login credentials.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            account: A `BrokerAccount` instance</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">        Returns: </span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">            A `Broker` instance</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">            AttributeError: If the type of broker is not supported</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span class="k">if</span> <span class="n">account</span><span class="o">.</span><span class="n">broker</span> <span class="o">==</span> <span class="s1">&#39;IB&#39;</span><span class="p">:</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>            <span class="kn">from</span> <span class="nn">.ib</span> <span class="kn">import</span> <span class="n">InteractiveBrokers</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>            <span class="k">return</span> <span class="n">InteractiveBrokers</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="k">elif</span> <span class="n">account</span><span class="o">.</span><span class="n">broker</span> <span class="o">==</span> <span class="s1">&#39;Manual&#39;</span><span class="p">:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span class="kn">from</span> <span class="nn">.manual</span> <span class="kn">import</span> <span class="n">ManualBroker</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span class="k">return</span> <span class="n">ManualBroker</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Broker </span><span class="si">{</span><span class="n">account</span><span class="o">.</span><span class="n">broker</span><span class="si">}</span><span class="s1"> is not supported&#39;</span><span class="p">)</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="n">BrokerAccount</span><span class="p">):</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39; Create a broker connector with the supplied `account` info. </span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">            account: a `BrokerAccount` instance</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">account</span> <span class="o">=</span> <span class="n">account</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>    <span class="k">def</span> <span class="nf">is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Check if the broker connector has a working connection with the broker.</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">        All calls interacting with the broker system should only be sent after</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        `is_ready` return True. </span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        Returns: </span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">            True if a connection to broker is ready, otherwise False</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Set up a working connection to the broker.</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">            ConnectionError: If a working connection can&#39;t be established.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span class="k">def</span> <span class="nf">submit_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">:</span> <span class="n">TradePlan</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Submit an order to the broker.</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">            plan: A trade plan</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">            order: A `RawOrder` to be submitted</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">            Broker assigned order ID if order is submitted successfully, otherwise None</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="k">def</span> <span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">:</span> <span class="n">TradePlan</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Cancel a specific order or all pending orders of a trade plan if `order` is None.</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">            plan: A trade plan</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">            order: A `RawOrder` to be cancelled</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">            RuntimeError if error occurs during cancellation</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="k">def</span> <span class="nf">get_account_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get broker account meta info</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">            A dict that contains broker specific account information</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="k">def</span> <span class="nf">get_portfolio</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get account portfolio</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="sd">            A dataframe that contains broker specific portfolio infomation</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="k">def</span> <span class="nf">download_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get recent trades at broker. Trades are completed orders.</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">        This function is called immediately before and after order submission to get the most </span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">        recent trade information on the broker side. The trades returned should be persisted</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">        to database and can be used for display, order validation, statistics, and record keeping.</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">        Trade info is usually final.</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">        The number of trades returned depends on the data availability of particular broker.</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">            A dataframe that contains recently finished trades</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>    <span class="k">def</span> <span class="nf">download_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get recent orders at broker. RawOrder submitted creates a correspoing order</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        on the broker side, which can have different status such as open, cancelled, error, etc.</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">        This function is called immediately before and after order submission to get the most </span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">        recent order information on the broker side. The orders returned should be persisted</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">        to database and can be used for display, order validation, statistics, and record keeping.</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">        Since order status can change over time, new status should overwrite past one.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">        The number of orders returned depends on the data availability of each broker.</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">            A dataframe that contains recent order information</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Disconnect from broker and release any resources.&#39;&#39;&#39;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>    <span class="k">def</span> <span class="nf">resolve_tickers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticker_css</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Resolve generic tickers to broker specific ticker IDs.</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">            ticker_css: A list of tickers formatted as a comma separated string</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">            A dict mapping each generic ticker name to a list of broker ticker options.</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">                The format is like </span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">                {</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">                    TK1: [</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">                        {&#39;id&#39;: id1, &#39;label&#39;: label1}, </span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">                        {&#39;id&#39;: id2, &#39;label&#39;: label2}</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">                    ], </span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">                    TK2: [</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">                        {&#39;id&#39;: id1, &#39;label&#39;: label1}</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">                    ],</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="sd">                    TK3: []</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">                }</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">                where id is the broker specific ticker ID, label is a human readable string</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">                to help disambiguate the options.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>    <span class="k">def</span> <span class="nf">find_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get trade information associated with the raw `order`.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">        A &#39;RawOrder&#39; can be filled in multiple trades at different time and prices, therefore</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">        a list of trades may be returned.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">        A subclass implementing this function only needs to look up trades from the database,</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">        instead of querying the broker directly, which can be slow. In scenarios where stale</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">        information can&#39;t be tolerated, `download_trades()` is always called before this </span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">        function is invoked.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">            order: A `RawOrder`</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">            A list of dict that contains broker specific trade infomation associated with the order, </span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">            or None if no broker trade is found.</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>    <span class="k">def</span> <span class="nf">find_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get last known order status, not necessarily latest.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">        A subclass implementing this function only needs to look up orders from the database,</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">        instead of querying the broker directly, which can be slow. In scenarios where stale</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">        information can&#39;t be tolerated, `download_orders()` is always called before this </span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">        function is invoked.</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">            order: A `RawOrder`</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">            A dict that contains broker specific order infomation associated with the order, </span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">            or None if no broker order is found.</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>    <span class="k">def</span> <span class="nf">format_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orders</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RawOrder</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get broker specific trade status corresponding to the list of orders and format</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">            in dict like:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">            {</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">                &#39;ticker&#39;: ...,</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">                &#39;entry_time&#39;: ...,</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">                &#39;size&#39;: ...,</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">                &#39;entry_price&#39;: ...,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">                &#39;commission&#39;: ...</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">            }</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">            orders: A list of `RawOrder`</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">            A list of completed trades with relevant information</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.Broker.AVAILABLE_BROKERS" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">AVAILABLE_BROKERS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;IB&#39;</span><span class="p">:</span> <span class="s1">&#39;Interactive Brokers&#39;</span><span class="p">,</span> <span class="s1">&#39;Manual&#39;</span><span class="p">:</span> <span class="s1">&#39;Manual Trader&#39;</span><span class="p">}</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>A dict mapping from broker alias to broker user-friendly name for supported brokers.</p>
  </div>

</div>




<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">account</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Create a broker connector with the supplied <code>account</code> info. </p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>account</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.broker.base.BrokerAccount" href="#minitrade.broker.base.BrokerAccount">BrokerAccount</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a <code>BrokerAccount</code> instance</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="n">BrokerAccount</span><span class="p">):</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39; Create a broker connector with the supplied `account` info. </span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">        account: a `BrokerAccount` instance</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">account</span> <span class="o">=</span> <span class="n">account</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.cancel_order" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">cancel_order</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Cancel a specific order or all pending orders of a trade plan if <code>order</code> is None.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>plan</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.TradePlan" href="../trader/#minitrade.trader.trader.TradePlan">TradePlan</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A trade plan</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>order</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.RawOrder" href="../trader/#minitrade.trader.trader.RawOrder">RawOrder</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>RawOrder</code> to be cancelled</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="k">def</span> <span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">:</span> <span class="n">TradePlan</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Cancel a specific order or all pending orders of a trade plan if `order` is None.</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">        plan: A trade plan</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">        order: A `RawOrder` to be cancelled</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">        RuntimeError if error occurs during cancellation</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.connect" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Set up a working connection to the broker.</p>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ConnectionError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If a working connection can't be established.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Set up a working connection to the broker.</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">        ConnectionError: If a working connection can&#39;t be established.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.disconnect" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">disconnect</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Disconnect from broker and release any resources.</p>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Disconnect from broker and release any resources.&#39;&#39;&#39;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.download_orders" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">download_orders</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get recent orders at broker. RawOrder submitted creates a correspoing order
on the broker side, which can have different status such as open, cancelled, error, etc.</p>
<p>This function is called immediately before and after order submission to get the most 
recent order information on the broker side. The orders returned should be persisted
to database and can be used for display, order validation, statistics, and record keeping.
Since order status can change over time, new status should overwrite past one.</p>
<p>The number of orders returned depends on the data availability of each broker.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataframe that contains recent order information</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="k">def</span> <span class="nf">download_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get recent orders at broker. RawOrder submitted creates a correspoing order</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">    on the broker side, which can have different status such as open, cancelled, error, etc.</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">    This function is called immediately before and after order submission to get the most </span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">    recent order information on the broker side. The orders returned should be persisted</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">    to database and can be used for display, order validation, statistics, and record keeping.</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">    Since order status can change over time, new status should overwrite past one.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    The number of orders returned depends on the data availability of each broker.</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">        A dataframe that contains recent order information</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.download_trades" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">download_trades</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get recent trades at broker. Trades are completed orders.</p>
<p>This function is called immediately before and after order submission to get the most 
recent trade information on the broker side. The trades returned should be persisted
to database and can be used for display, order validation, statistics, and record keeping.
Trade info is usually final.</p>
<p>The number of trades returned depends on the data availability of particular broker.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataframe that contains recently finished trades</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="k">def</span> <span class="nf">download_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get recent trades at broker. Trades are completed orders.</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    This function is called immediately before and after order submission to get the most </span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">    recent trade information on the broker side. The trades returned should be persisted</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    to database and can be used for display, order validation, statistics, and record keeping.</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">    Trade info is usually final.</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">    The number of trades returned depends on the data availability of particular broker.</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        A dataframe that contains recently finished trades</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.find_order" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">find_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get last known order status, not necessarily latest.</p>
<p>A subclass implementing this function only needs to look up orders from the database,
instead of querying the broker directly, which can be slow. In scenarios where stale
information can't be tolerated, <code>download_orders()</code> is always called before this 
function is invoked.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>order</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.RawOrder" href="../trader/#minitrade.trader.trader.RawOrder">RawOrder</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>RawOrder</code></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dict that contains broker specific order infomation associated with the order, </p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>or None if no broker order is found.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="k">def</span> <span class="nf">find_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get last known order status, not necessarily latest.</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">    A subclass implementing this function only needs to look up orders from the database,</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">    instead of querying the broker directly, which can be slow. In scenarios where stale</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">    information can&#39;t be tolerated, `download_orders()` is always called before this </span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">    function is invoked.</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        order: A `RawOrder`</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">        A dict that contains broker specific order infomation associated with the order, </span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">        or None if no broker order is found.</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.find_trades" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">find_trades</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get trade information associated with the raw <code>order</code>.</p>
<p>A 'RawOrder' can be filled in multiple trades at different time and prices, therefore
a list of trades may be returned.</p>
<p>A subclass implementing this function only needs to look up trades from the database,
instead of querying the broker directly, which can be slow. In scenarios where stale
information can't be tolerated, <code>download_trades()</code> is always called before this 
function is invoked.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>order</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.RawOrder" href="../trader/#minitrade.trader.trader.RawOrder">RawOrder</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>RawOrder</code></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of dict that contains broker specific trade infomation associated with the order, </p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>or None if no broker trade is found.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="k">def</span> <span class="nf">find_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get trade information associated with the raw `order`.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    A &#39;RawOrder&#39; can be filled in multiple trades at different time and prices, therefore</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">    a list of trades may be returned.</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">    A subclass implementing this function only needs to look up trades from the database,</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">    instead of querying the broker directly, which can be slow. In scenarios where stale</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">    information can&#39;t be tolerated, `download_trades()` is always called before this </span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">    function is invoked.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">        order: A `RawOrder`</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">        A list of dict that contains broker specific trade infomation associated with the order, </span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">        or None if no broker trade is found.</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.format_trades" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">format_trades</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get broker specific trade status corresponding to the list of orders and format
    in dict like:
    {
        'ticker': ...,
        'entry_time': ...,
        'size': ...,
        'entry_price': ...,
        'commission': ...
    }</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>orders</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="minitrade.trader.RawOrder" href="../trader/#minitrade.trader.trader.RawOrder">RawOrder</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of <code>RawOrder</code></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of completed trades with relevant information</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="k">def</span> <span class="nf">format_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orders</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RawOrder</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get broker specific trade status corresponding to the list of orders and format</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        in dict like:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">        {</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">            &#39;ticker&#39;: ...,</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">            &#39;entry_time&#39;: ...,</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">            &#39;size&#39;: ...,</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">            &#39;entry_price&#39;: ...,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">            &#39;commission&#39;: ...</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">        }</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">        orders: A list of `RawOrder`</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        A list of completed trades with relevant information</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.get_account_info" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_account_info</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get broker account meta info</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dict that contains broker specific account information</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="k">def</span> <span class="nf">get_account_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get broker account meta info</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        A dict that contains broker specific account information</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.get_broker" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_broker</span><span class="p">(</span><span class="n">account</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Create a broker connector for a <code>account</code> that specifies the type of broker
and the login credentials.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>account</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.broker.base.BrokerAccount" href="#minitrade.broker.base.BrokerAccount">BrokerAccount</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>BrokerAccount</code> instance</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.broker.base.Broker" href="#minitrade.broker.base.Broker">Broker</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>Broker</code> instance</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>AttributeError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the type of broker is not supported</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="k">def</span> <span class="nf">get_broker</span><span class="p">(</span><span class="n">account</span><span class="p">:</span> <span class="n">BrokerAccount</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Broker</span><span class="p">:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Create a broker connector for a `account` that specifies the type of broker</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">    and the login credentials.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">        account: A `BrokerAccount` instance</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">    Returns: </span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        A `Broker` instance</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        AttributeError: If the type of broker is not supported</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span class="k">if</span> <span class="n">account</span><span class="o">.</span><span class="n">broker</span> <span class="o">==</span> <span class="s1">&#39;IB&#39;</span><span class="p">:</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>        <span class="kn">from</span> <span class="nn">.ib</span> <span class="kn">import</span> <span class="n">InteractiveBrokers</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="k">return</span> <span class="n">InteractiveBrokers</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>    <span class="k">elif</span> <span class="n">account</span><span class="o">.</span><span class="n">broker</span> <span class="o">==</span> <span class="s1">&#39;Manual&#39;</span><span class="p">:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span class="kn">from</span> <span class="nn">.manual</span> <span class="kn">import</span> <span class="n">ManualBroker</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="k">return</span> <span class="n">ManualBroker</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Broker </span><span class="si">{</span><span class="n">account</span><span class="o">.</span><span class="n">broker</span><span class="si">}</span><span class="s1"> is not supported&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.get_portfolio" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_portfolio</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get account portfolio</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataframe that contains broker specific portfolio infomation</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="k">def</span> <span class="nf">get_portfolio</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Get account portfolio</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="sd">        A dataframe that contains broker specific portfolio infomation</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.is_ready" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">is_ready</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Check if the broker connector has a working connection with the broker.</p>
<p>All calls interacting with the broker system should only be sent after
<code>is_ready</code> return True. </p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if a connection to broker is ready, otherwise False</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="k">def</span> <span class="nf">is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Check if the broker connector has a working connection with the broker.</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">    All calls interacting with the broker system should only be sent after</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    `is_ready` return True. </span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">    Returns: </span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">        True if a connection to broker is ready, otherwise False</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.resolve_tickers" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">resolve_tickers</span><span class="p">(</span><span class="n">ticker_css</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Resolve generic tickers to broker specific ticker IDs.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ticker_css</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of tickers formatted as a comma separated string</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, list]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dict mapping each generic ticker name to a list of broker ticker options.
The format is like 
{
    TK1: [
        {'id': id1, 'label': label1}, 
        {'id': id2, 'label': label2}
    ], 
    TK2: [
        {'id': id1, 'label': label1}
    ],
    TK3: []
}
where id is the broker specific ticker ID, label is a human readable string
to help disambiguate the options.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="k">def</span> <span class="nf">resolve_tickers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticker_css</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Resolve generic tickers to broker specific ticker IDs.</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">        ticker_css: A list of tickers formatted as a comma separated string</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">        A dict mapping each generic ticker name to a list of broker ticker options.</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">            The format is like </span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">            {</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">                TK1: [</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">                    {&#39;id&#39;: id1, &#39;label&#39;: label1}, </span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">                    {&#39;id&#39;: id2, &#39;label&#39;: label2}</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">                ], </span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">                TK2: [</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">                    {&#39;id&#39;: id1, &#39;label&#39;: label1}</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">                ],</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="sd">                TK3: []</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">            }</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">            where id is the broker specific ticker ID, label is a human readable string</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">            to help disambiguate the options.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.Broker.submit_order" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">submit_order</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Submit an order to the broker.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>plan</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.TradePlan" href="../trader/#minitrade.trader.trader.TradePlan">TradePlan</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A trade plan</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>order</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.RawOrder" href="../trader/#minitrade.trader.trader.RawOrder">RawOrder</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A <code>RawOrder</code> to be submitted</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Broker assigned order ID if order is submitted successfully, otherwise None</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="k">def</span> <span class="nf">submit_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">:</span> <span class="n">TradePlan</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Submit an order to the broker.</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">        plan: A trade plan</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">        order: A `RawOrder` to be submitted</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">        Broker assigned order ID if order is submitted successfully, otherwise None</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="minitrade.broker.base.BrokerAccount" class="doc doc-heading">
          <code>BrokerAccount</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">

  
      <p>BrokerAccount describes a broker account, such as name, type, and login credentials.</p>

            <details class="quote">
              <summary>Source code in <code>minitrade/broker/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="k">class</span> <span class="nc">BrokerAccount</span><span class="p">:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    BrokerAccount describes a broker account, such as name, type, and login credentials.</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Account alias&#39;&#39;&#39;</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="n">broker</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Broker alias as in `Broker.AVAILABLE_BROKERS`&#39;&#39;&#39;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;&quot;Live&quot; or &quot;Paper&quot;. Note this is only a hint to help remember. Whether an account</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    is live or paper depends on the account itself rather than this field.&#39;&#39;&#39;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Account username&#39;&#39;&#39;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Account password&#39;&#39;&#39;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">def</span> <span class="nf">get_account</span><span class="p">(</span><span class="n">plan_or_alias</span><span class="p">:</span> <span class="n">TradePlan</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BrokerAccount</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Look up a broker account from a broker account `alias` or the alias </span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        as specified in a `TradePlan`.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">            plan_or_alias: A trade plan or a broker account alias</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">            A broker account, or None if the alias is invalid</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>        <span class="n">alias</span> <span class="o">=</span> <span class="n">plan_or_alias</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plan_or_alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">plan_or_alias</span><span class="o">.</span><span class="n">broker_account</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span class="k">return</span> <span class="n">MTDB</span><span class="o">.</span><span class="n">get_one</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">BrokerAccount</span><span class="p">)</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="k">def</span> <span class="nf">list</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BrokerAccount</span><span class="p">]:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Return the list of available broker accounts.</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">            A list of zero or more broker accounts</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="k">return</span> <span class="n">MTDB</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">BrokerAccount</span><span class="p">,</span> <span class="n">orderby</span><span class="o">=</span><span class="s1">&#39;alias&#39;</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Save a broker account to database.&#39;&#39;&#39;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">MTDB</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="n">on_conflict</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Delete broker account from database.&#39;&#39;&#39;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="n">MTDB</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.BrokerAccount.alias" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">alias</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Account alias</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.BrokerAccount.broker" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">broker</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Broker alias as in <code>Broker.AVAILABLE_BROKERS</code></p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.BrokerAccount.mode" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">mode</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>"Live" or "Paper". Note this is only a hint to help remember. Whether an account
is live or paper depends on the account itself rather than this field.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.BrokerAccount.password" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">password</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Account password</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.BrokerAccount.username" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">username</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Account username</p>
  </div>

</div>




<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.BrokerAccount.delete" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">delete</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Delete broker account from database.</p>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Delete broker account from database.&#39;&#39;&#39;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="n">MTDB</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.BrokerAccount.get_account" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_account</span><span class="p">(</span><span class="n">plan_or_alias</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Look up a broker account from a broker account <code>alias</code> or the alias 
as specified in a <code>TradePlan</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>plan_or_alias</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.trader.TradePlan" href="../trader/#minitrade.trader.trader.TradePlan">TradePlan</a> | str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A trade plan or a broker account alias</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.broker.base.BrokerAccount" href="#minitrade.broker.base.BrokerAccount">BrokerAccount</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A broker account, or None if the alias is invalid</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="k">def</span> <span class="nf">get_account</span><span class="p">(</span><span class="n">plan_or_alias</span><span class="p">:</span> <span class="n">TradePlan</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BrokerAccount</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Look up a broker account from a broker account `alias` or the alias </span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    as specified in a `TradePlan`.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        plan_or_alias: A trade plan or a broker account alias</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        A broker account, or None if the alias is invalid</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">alias</span> <span class="o">=</span> <span class="n">plan_or_alias</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plan_or_alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">plan_or_alias</span><span class="o">.</span><span class="n">broker_account</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">return</span> <span class="n">MTDB</span><span class="o">.</span><span class="n">get_one</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">BrokerAccount</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.BrokerAccount.list" class="doc doc-heading">
          <code class="highlight language-python"><span class="nb">list</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Return the list of available broker accounts.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="minitrade.broker.base.BrokerAccount.list" href="#minitrade.broker.base.BrokerAccount.list">list</a>[<a class="autorefs autorefs-internal" title="minitrade.broker.base.BrokerAccount" href="#minitrade.broker.base.BrokerAccount">BrokerAccount</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of zero or more broker accounts</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="k">def</span> <span class="nf">list</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">BrokerAccount</span><span class="p">]:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Return the list of available broker accounts.</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        A list of zero or more broker accounts</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="k">return</span> <span class="n">MTDB</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">BrokerAccount</span><span class="p">,</span> <span class="n">orderby</span><span class="o">=</span><span class="s1">&#39;alias&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.BrokerAccount.save" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Save a broker account to database.</p>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Save a broker account to database.&#39;&#39;&#39;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="n">MTDB</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;BrokerAccount&#39;</span><span class="p">,</span> <span class="n">on_conflict</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="minitrade.broker.base.OrderValidator" class="doc doc-heading">
          <code>OrderValidator</code>


</h3>


  <div class="doc doc-contents ">

  
      <p>OrderValidator is responsible for integrity checks on a raw order before it's
submitted to broker.</p>

            <details class="quote">
              <summary>Source code in <code>minitrade/broker/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="k">class</span> <span class="nc">OrderValidator</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;OrderValidator is responsible for integrity checks on a raw order before it&#39;s</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    submitted to broker.&#39;&#39;&#39;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plan</span><span class="p">:</span> <span class="n">TradePlan</span><span class="p">):</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">plan</span> <span class="o">=</span> <span class="n">plan</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tests</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_is_in_sync_with_db</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_has_correct_plan_id</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_has_correct_run_id</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_has_correct_ticker</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_has_correct_size</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">order_has_no_broker_order_id</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="p">]</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span class="k">def</span> <span class="nf">_assert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">condition</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="k">if</span> <span class="n">condition</span> <span class="o">!=</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="k">def</span> <span class="nf">_assert_is_null</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">(</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">def</span> <span class="nf">_assert_not_null</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">(</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="k">def</span> <span class="nf">_assert_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">expected_value</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="n">expected_value</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s1"> != </span><span class="si">{</span><span class="n">expected_value</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="k">def</span> <span class="nf">_assert_is_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">(</span><span class="n">value</span> <span class="ow">in</span> <span class="n">collection</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s1"> not in </span><span class="si">{</span><span class="n">collection</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span class="k">def</span> <span class="nf">_assert_less_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">value</span><span class="si">=}</span><span class="s1"> &gt;= </span><span class="si">{</span><span class="n">limit</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="k">def</span> <span class="nf">order_is_in_sync_with_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span class="n">order_in_db</span> <span class="o">=</span> <span class="n">MTDB</span><span class="o">.</span><span class="n">get_one</span><span class="p">(</span><span class="s1">&#39;RawOrder&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_not_null</span><span class="p">(</span><span class="n">order_in_db</span><span class="p">,</span> <span class="s1">&#39;Order is not in RawOrder table&#39;</span><span class="p">)</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_equal</span><span class="p">(</span><span class="n">asdict</span><span class="p">(</span><span class="n">order</span><span class="p">),</span> <span class="n">order_in_db</span><span class="p">,</span> <span class="s1">&#39;Order is not in sync with db&#39;</span><span class="p">)</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="k">def</span> <span class="nf">order_has_correct_plan_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_equal</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">plan_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;Order has incorrect plan ID&#39;</span><span class="p">)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="k">def</span> <span class="nf">order_has_correct_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_not_null</span><span class="p">(</span><span class="n">MTDB</span><span class="o">.</span><span class="n">get_one</span><span class="p">(</span><span class="s1">&#39;BacktestLog&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">run_id</span><span class="p">),</span> <span class="s1">&#39;Order has incorrect run ID&#39;</span><span class="p">)</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="k">def</span> <span class="nf">order_has_correct_ticker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_is_in</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">ticker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan</span><span class="o">.</span><span class="n">ticker_css</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="s1">&#39;Order has incorrect ticker&#39;</span><span class="p">)</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_not_null</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plan</span><span class="o">.</span><span class="n">broker_instrument_id</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">ticker</span><span class="p">),</span> <span class="s1">&#39;Order has incorrect ticker mapping&#39;</span><span class="p">)</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>    <span class="k">def</span> <span class="nf">order_has_correct_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert</span><span class="p">((</span><span class="n">order</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">order</span><span class="o">.</span><span class="n">side</span> <span class="o">==</span> <span class="s1">&#39;Buy&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="n">order</span><span class="o">.</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">order</span><span class="o">.</span><span class="n">side</span> <span class="o">==</span> <span class="s1">&#39;Sell&#39;</span><span class="p">),</span> <span class="s1">&#39;Order side and size does not agree&#39;</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="k">def</span> <span class="nf">order_has_no_broker_order_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_assert_is_null</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">broker_order_id</span><span class="p">,</span> <span class="s1">&#39;Order already has broker_order_id&#39;</span><span class="p">)</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Run a bunch of checks to ensure the raw order is valid.</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">        For example, a valid order should:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        - have valid values for all its attributes</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">        - not be a duplicate of what has been submitted before</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">        - be timely</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">        &#39;&#39;&#39;</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span class="n">result</span><span class="p">,</span> <span class="n">ex</span> <span class="o">=</span> <span class="p">{},</span> <span class="kc">None</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tests</span><span class="p">:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>                <span class="n">test</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>                <span class="n">result</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Pass&#39;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="n">result</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Fail&#39;</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="n">ex</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Order </span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> failed </span><span class="si">{</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_log_validator_run</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">def</span> <span class="nf">_log_validator_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">log</span> <span class="o">=</span> <span class="n">OrderValidatorLog</span><span class="p">(</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span class="nb">id</span><span class="o">=</span><span class="n">MTDB</span><span class="o">.</span><span class="n">uniqueid</span><span class="p">(),</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="n">order_id</span><span class="o">=</span><span class="n">order</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>            <span class="n">exception</span><span class="o">=</span><span class="n">exception</span><span class="p">,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>            <span class="n">log_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="p">)</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="n">MTDB</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="s1">&#39;OrderValidatorLog&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h4 id="minitrade.broker.base.OrderValidator.validate" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Run a bunch of checks to ensure the raw order is valid.</p>
<p>For example, a valid order should:</p>
<ul>
<li>have valid values for all its attributes</li>
<li>not be a duplicate of what has been submitted before</li>
<li>be timely</li>
</ul>

          <details class="quote">
            <summary>Source code in <code>minitrade/broker/base.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">RawOrder</span><span class="p">):</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Run a bunch of checks to ensure the raw order is valid.</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">    For example, a valid order should:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">    - have valid values for all its attributes</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    - not be a duplicate of what has been submitted before</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    - be timely</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">result</span><span class="p">,</span> <span class="n">ex</span> <span class="o">=</span> <span class="p">{},</span> <span class="kc">None</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tests</span><span class="p">:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="n">test</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>            <span class="n">result</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Pass&#39;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="n">result</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Fail&#39;</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="n">ex</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Order </span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> failed </span><span class="si">{</span><span class="n">test</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_validator_run</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h3 id="minitrade.broker.base.OrderValidatorLog" class="doc doc-heading">
          <code>OrderValidatorLog</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">

  
      <p>OrderValidatorLog logs the results of order validation.</p>

            <details class="quote">
              <summary>Source code in <code>minitrade/broker/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span>
<span class="normal"><a href="#__codelineno-0-97">97</a></span>
<span class="normal"><a href="#__codelineno-0-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="k">class</span> <span class="nc">OrderValidatorLog</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;OrderValidatorLog logs the results of order validation.&#39;&#39;&#39;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Validator run ID&#39;&#39;&#39;</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Raw order ID&#39;&#39;&#39;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="n">order</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Raw order in Json format&#39;&#39;&#39;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">result</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Validation output&#39;&#39;&#39;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="n">exception</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Exception that occurs during validation&#39;&#39;&#39;</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="n">log_time</span><span class="p">:</span> <span class="n">datetime</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Log time&#39;&#39;&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.exception" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">exception</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Exception that occurs during validation</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.id" class="doc doc-heading">
          <code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Validator run ID</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.log_time" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">log_time</span><span class="p">:</span> <span class="n">datetime</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Log time</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.order" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">order</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Raw order in Json format</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.order_id" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Raw order ID</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h4 id="minitrade.broker.base.OrderValidatorLog.result" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">result</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Validation output</p>
  </div>

</div>





  </div>

  </div>

</div>




  </div>

  </div>

</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../datasource/" class="md-footer__link md-footer__link--prev" aria-label="Previous: minitrade.datasource" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              minitrade.datasource
            </div>
          </div>
        </a>
      
      
        
        <a href="../trader/" class="md-footer__link md-footer__link--next" aria-label="Next: minitrade.trader" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              minitrade.trader
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "toc.follow", "navigation.top"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>